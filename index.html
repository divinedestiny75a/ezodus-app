<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EZODUS - AI Social Media Strategist</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & Babel -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Firebase -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { 
            getAuth, 
            createUserWithEmailAndPassword, 
            signInWithEmailAndPassword, 
            onAuthStateChanged,
            signOut,
            sendEmailVerification
        } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
        import { 
            getFirestore, 
            doc, 
            setDoc, 
            getDoc,
            onSnapshot
        } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
          apiKey: "AIzaSyAe4CT1SwCtGjbvuRPKRtQU0eZLu04A93k",
          authDomain: "ezodusapp.firebaseapp.com",
          projectId: "ezodusapp",
          storageBucket: "ezodusapp.appspot.com",
          messagingSenderId: "358122170869",
          appId: "1:358122170869:web:659f94e076c7dc512a18bc",
          measurementId: "G-FJTN9NRYYC"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        window.auth = getAuth(app);
        window.db = getFirestore(app);
        window.firebase = {
            createUserWithEmailAndPassword,
            signInWithEmailAndPassword,
            onAuthStateChanged,
            signOut,
            sendEmailVerification,
            doc,
            setDoc,
            getDoc,
            onSnapshot
        };
    </script>
    
    <style>
        body { font-family: 'Inter', sans-serif; }
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- SVG Icons ---
        const BrandVoiceIcon = () => <svg className="w-8 h-8 text-yellow-400" stroke="currentColor" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="1.5" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.536L16.732 3.732z"></path></svg>;
        const ImageGenIcon = () => <svg className="w-8 h-8 text-yellow-400" stroke="currentColor" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="1.5" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>;
        const SchedulingIcon = () => <svg className="w-8 h-8 text-yellow-400" stroke="currentColor" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="1.5" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="1.5" d="M12 18h.01"></path></svg>;
        const AnalyticsIcon = () => <svg className="w-8 h-8 text-yellow-400" stroke="currentColor" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="1.5" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg>;
        const MetaIcon = () => <svg className="w-6 h-6 mr-3" viewBox="0 0 24 24" fill="currentColor"><path d="M22.09 8.64v6.72h-3.36v-2.88c0-1.32-.96-1.92-1.92-1.92s-1.92.6-1.92 1.92v2.88h-3.36V8.64h3.36v2.4c.6-.96 1.44-1.44 2.88-1.44 1.92 0 3.36 1.44 3.36 4.32v-4.8h-3.36zM1.91 0v24h20.18V0H1.91zm18.26 22.08H3.83V1.92h16.34v20.16z"></path></svg>;
        const EyeIcon = () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>;
        const EyeOffIcon = () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.542-7 1.274-4.057 5.064-7 9.542-7 .847 0 1.67.127 2.454.364m-6.91 6.91a3 3 0 014.243-4.243m-4.243 4.243l4.243-4.243m-1.27 1.27l6.364 6.364M3.54 4.46l16.97 16.97"></path></svg>;

        // --- All Components ---

        const ConstellationBackground = () => {
            const canvasRef = useRef(null);
            useEffect(() => {
                const canvas = canvasRef.current; if (!canvas) return;
                const ctx = canvas.getContext('2d'); let animationFrameId;
                let width = canvas.width = window.innerWidth; let height = canvas.height = window.innerHeight;
                const handleResize = () => { width = canvas.width = window.innerWidth; height = canvas.height = window.innerHeight; };
                window.addEventListener('resize', handleResize);
                const fireflies = []; const numFireflies = 100;
                for (let i = 0; i < numFireflies; i++) {
                    fireflies.push({ x: Math.random() * width, y: Math.random() * height, radius: Math.random() * 2 + 1, vx: (Math.random() - 0.5) * 0.5, vy: (Math.random() - 0.5) * 0.5, opacity: Math.random() * 0.5 + 0.2, flickerSpeed: (Math.random() - 0.5) * 0.02 });
                }
                const draw = () => {
                    if(!ctx) return; ctx.clearRect(0, 0, width, height);
                    fireflies.forEach(f => {
                        ctx.beginPath();
                        const gradient = ctx.createRadialGradient(f.x, f.y, 0, f.x, f.y, f.radius * 2);
                        gradient.addColorStop(0, `rgba(251, 191, 36, ${f.opacity})`); gradient.addColorStop(1, `rgba(251, 191, 36, 0)`);
                        ctx.fillStyle = gradient; ctx.arc(f.x, f.y, f.radius * 2, 0, Math.PI * 2); ctx.fill();
                    });
                    ctx.beginPath();
                    for (let i = 0; i < fireflies.length; i++) {
                        for (let j = i + 1; j < fireflies.length; j++) {
                            const dist = Math.hypot(fireflies[i].x - fireflies[j].x, fireflies[i].y - fireflies[j].y);
                            if (dist < 120) {
                                const opacity = 1 - (dist / 120); ctx.moveTo(fireflies[i].x, fireflies[i].y); ctx.lineTo(fireflies[j].x, fireflies[j].y); ctx.strokeStyle = `rgba(251, 191, 36, ${opacity * 0.2})`;
                            }
                        }
                    }
                    ctx.lineWidth = 0.5; ctx.stroke();
                };
                const update = () => {
                    fireflies.forEach(f => {
                        f.x += f.vx; f.y += f.vy;
                        if (f.x < 0 || f.x > width) f.vx *= -1; if (f.y < 0 || f.y > height) f.vy *= -1;
                        f.opacity += f.flickerSpeed; if (f.opacity <= 0.1 || f.opacity >= 1) { f.flickerSpeed *= -1; }
                    });
                };
                const animate = () => { draw(); update(); animationFrameId = requestAnimationFrame(animate); };
                animate();
                return () => { cancelAnimationFrame(animationFrameId); window.removeEventListener('resize', handleResize); };
            }, []);
            return <canvas ref={canvasRef} style={{ position: 'fixed', top: 0, left: 0, zIndex: -1, background: '#000000' }} />;
        };

        const Header = ({ onNavigate }) => ( <header className="bg-black/50 backdrop-blur-sm border-b border-yellow-500/20 fixed top-0 left-0 right-0 z-50"> <div className="container mx-auto px-6 py-4 flex justify-between items-center"> <div className="text-2xl font-bold tracking-wider text-white"><span className="text-yellow-400">EZO</span>DUS</div> <nav className="hidden md:flex items-center space-x-6 text-gray-300"> <a href="#features" className="hover:text-yellow-400 transition-colors">Features</a> <a href="#pricing" className="hover:text-yellow-400 transition-colors">Pricing</a> <a href="#contact" className="hover:text-yellow-400 transition-colors">Contact</a> </nav> <div><button onClick={() => onNavigate('login')} className="bg-yellow-400 hover:bg-yellow-500 text-black font-bold py-2 px-4 rounded-lg transition-all transform hover:scale-105">Get Started</button></div> </div> </header> );
        const Footer = () => ( <footer className="bg-transparent mt-20"> <div className="container mx-auto px-6 py-8 text-center text-gray-400 border-t border-yellow-500/20"> <p>&copy; 2024 EZODUS. All rights reserved.</p> <p className="mt-2 text-sm">Building the future of social media management.</p> </div> </footer> );
        const FeatureCard = ({ icon, title, description }) => (<div className="bg-black/30 backdrop-blur-md p-8 rounded-xl border border-yellow-500/30 h-full flex flex-col items-center text-center"><div className="w-16 h-16 mb-6 bg-yellow-400/10 rounded-full flex items-center justify-center border border-yellow-400/20">{icon}</div><h3 className="text-xl font-bold mb-2 text-yellow-400">{title}</h3><p className="text-gray-400 text-sm">{description}</p></div>);
        const PricingCard = ({ plan, price, description, features, onSelect, primary = false }) => (<div className={`w-full max-w-sm p-8 rounded-2xl border flex flex-col transition-all transform hover:-translate-y-2 ${primary ? 'bg-yellow-400/10 border-yellow-400 shadow-yellow-400/20 shadow-lg' : 'bg-black/30 border-yellow-500/30'}`}><h3 className={`text-2xl font-bold ${primary ? 'text-yellow-400' : 'text-white'}`}>{plan}</h3><p className="text-gray-400 mt-1 h-10">{description}</p><p className="text-5xl font-extrabold my-4 text-white">${price}<span className="text-lg font-medium text-gray-400">/mo</span></p><ul className="space-y-3 text-gray-300 mb-8">{features.map(feature => (<li key={feature} className="flex items-center"><svg className="w-5 h-5 mr-2 shrink-0 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd"></path></svg><span>{feature}</span></li>))}</ul><button onClick={onSelect} className={`w-full mt-auto py-3 font-bold rounded-lg transition-all ${primary ? 'bg-yellow-400 text-black hover:bg-yellow-500' : 'bg-yellow-400/20 text-yellow-400 hover:bg-yellow-400/30'}`}>Select Plan</button></div>);
        const AuthFormWrapper = ({ children, title, subtitle }) => (<div className="flex items-center justify-center min-h-screen"><div className="w-full max-w-md p-8 space-y-6 bg-black/40 backdrop-blur-lg rounded-xl shadow-2xl shadow-yellow-500/10 border border-yellow-500/30"><h1 className="text-3xl font-bold text-center text-white">{title}</h1>{subtitle && <p className="text-center text-gray-400">{subtitle}</p>}{children}</div></div>);
        const Alert = ({ message, type = 'error' }) => { if (!message) return null; const colors = { error: 'bg-red-500/20 border-red-500 text-red-300', success: 'bg-green-500/20 border-green-500 text-green-300', }; return (<div className={`p-3 rounded-lg border ${colors[type]}`}>{message}</div>); };
        const ContactForm = () => { const [state, setState] = useState({ submitting: false, succeeded: false, error: null }); const handleSubmit = async (event) => { event.preventDefault(); setState({ ...state, submitting: true, error: null }); const form = event.target; const data = new FormData(form); try { const response = await fetch("https://formspree.io/f/mjkowlgj", { method: 'POST', body: data, headers: { 'Accept': 'application/json' } }); if (response.ok) { setState({ ...state, submitting: false, succeeded: true }); form.reset(); } else { const json = await response.json(); const errorMessage = json.errors ? json.errors.map(e => e.message).join(', ') : 'An unknown error occurred.'; setState({ ...state, submitting: false, error: errorMessage }); } } catch (error) { setState({ ...state, submitting: false, error: "There was a problem submitting your form." }); } }; if (state.succeeded) { return (<div className="text-center bg-green-500/20 border border-green-500 text-green-300 p-4 rounded-lg"><h3 className="font-bold text-lg">Thanks for your message!</h3><p>We'll get back to you shortly.</p></div>); } return (<form onSubmit={handleSubmit} className="space-y-4 text-left"><div className="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label htmlFor="name" className="block text-sm font-bold text-gray-400 mb-1">Your Name</label><input id="name" type="text" name="name" required className="w-full p-3 text-gray-200 bg-gray-900/50 rounded-lg border border-gray-700 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-400 outline-none" /></div><div><label htmlFor="email" className="block text-sm font-bold text-gray-400 mb-1">Your Email</label><input id="email" type="email" name="email" required className="w-full p-3 text-gray-200 bg-gray-900/50 rounded-lg border border-gray-700 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-400 outline-none" /></div></div><div><label htmlFor="message" className="block text-sm font-bold text-gray-400 mb-1">Message</label><textarea id="message" name="message" rows="4" required className="w-full p-3 text-gray-200 bg-gray-900/50 rounded-lg border border-gray-700 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-400 outline-none"></textarea></div>{state.error && <Alert message={state.error} />}<div className="text-center"><button type="submit" disabled={state.submitting} className="bg-yellow-400 hover:bg-yellow-500 text-black font-bold py-3 px-8 rounded-lg text-lg transition-all transform hover:scale-105 shadow-lg shadow-yellow-400/20 disabled:opacity-50 disabled:cursor-not-allowed">{state.submitting ? 'Sending...' : 'Send Message'}</button></div></form>); };
        const LandingPage = ({ onNavigate }) => ( <div className="relative overflow-hidden"> <Header onNavigate={onNavigate} /> <main> <section className="pt-40 pb-24 text-center"> <div className="container mx-auto px-6 relative z-10"><h1 className="text-5xl md:text-7xl font-extrabold mb-4 leading-tight text-white">Your AI Social Media Strategist</h1><p className="text-lg md:text-xl text-gray-300 mb-8 max-w-3xl mx-auto">EZODUS learns your brand, writes content in your voice, designs unique images, and schedules everything. Stop posting. Start strategizing.</p><button onClick={() => onNavigate('signup')} className="bg-yellow-400 hover:bg-yellow-500 text-black font-bold py-3 px-8 rounded-lg text-lg transition-all transform hover:scale-105 shadow-lg shadow-yellow-400/20">Start Your Free Trial</button></div> </section> <section id="features" className="py-20 bg-black/20"> <div className="container mx-auto px-6"><h2 className="text-4xl font-bold text-center mb-12 text-white [text-shadow:0_0_12px_rgba(251,191,36,0.7)]">The EZODUS Difference</h2><div className="grid md:grid-cols-2 lg:grid-cols-4 gap-8"><FeatureCard icon={<BrandVoiceIcon />} title="Automatic Brand Voice" description="Our AI scans your website to learn your unique voice, ensuring all generated content is authentic to you." /><FeatureCard icon={<ImageGenIcon />} title="AI Image Generation" description="Get custom-generated images to match every post. No more boring stock photos or complex design tools." /><FeatureCard icon={<SchedulingIcon />} title="Smart Scheduling" description="Plan your content calendar in minutes. Set it and forget it, we'll post for you at the optimal times." /><FeatureCard icon={<AnalyticsIcon />} title="Growth Analytics" description="Understand what works. Track your key metrics with a simple, beautiful dashboard to see your audience grow." /></div></div> </section> <section id="pricing" className="py-20"> <div className="container mx-auto px-6"><h2 className="text-4xl font-bold text-center mb-12 text-white">Pricing That Scales With You</h2><div className="flex flex-col lg:flex-row justify-center items-center gap-8"><PricingCard plan="Starter" price="0" description="Perfect for trying out the core features." features={['1 Social Account', '10 AI Post Generations/mo', '5 Scheduled Posts/mo', 'Basic Support']} onSelect={() => onNavigate('signup')} /><PricingCard plan="Pro" price="29" description="Ideal for small businesses and creators." features={['Up to 10 Social Accounts', 'Unlimited AI Generations', 'Unlimited Scheduling', 'AI Content Calendar', 'Performance Analytics', 'Priority Support']} onSelect={() => onNavigate('signup')} primary={true} /><PricingCard plan="Agency" price="79" description="For marketing agencies and power users." features={['Up to 50 Social Accounts', 'Team Collaboration (3 Users)', 'White-label Reports', 'Dedicated Account Manager']} onSelect={() => onNavigate('signup')} /></div></div> </section> <section id="contact" className="py-20 bg-black/20"> <div className="container mx-auto px-6 text-center max-w-2xl"><h2 className="text-4xl font-bold mb-4 text-white">Get In Touch</h2><p className="text-gray-300 mb-8">Have questions about our features, pricing, or anything else? Our team is ready to answer all your questions.</p><ContactForm /></div> </section> </main> <Footer /> </div> );
        const Login = ({ onNavigate }) => { const [email, setEmail] = useState(''); const [password, setPassword] = useState(''); const [error, setError] = useState(''); const [loading, setLoading] = useState(false); const [showPassword, setShowPassword] = useState(false); const handleLogin = async (e) => { e.preventDefault(); setLoading(true); setError(''); try { await window.firebase.signInWithEmailAndPassword(window.auth, email, password); } catch (err) { if (err.code === 'auth/invalid-credential') { setError("Incorrect email or password. Please check your details and try again."); } else { setError(err.message); } } setLoading(false); }; return ( <AuthFormWrapper title="Welcome Back!"> <form className="space-y-6" onSubmit={handleLogin}> <Alert message={error} /> <div> <label className="text-sm font-bold text-gray-400 block">Email</label> <input type="email" value={email} onChange={(e) => setEmail(e.target.value)} required className="w-full p-3 mt-1 text-gray-200 bg-gray-900/50 rounded-lg border border-gray-700 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-400 outline-none" /> </div> <div className="relative"> <label className="text-sm font-bold text-gray-400 block">Password</label> <input type={showPassword ? 'text' : 'password'} value={password} onChange={(e) => setPassword(e.target.value)} required className="w-full p-3 mt-1 text-gray-200 bg-gray-900/50 rounded-lg border border-gray-700 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-400 outline-none pr-10" /> <button type="button" onClick={() => setShowPassword(!showPassword)} className="absolute inset-y-0 right-0 top-6 flex items-center px-3 text-gray-400 hover:text-yellow-400"> {showPassword ? <EyeOffIcon /> : <EyeIcon />} </button> </div> <button type="submit" disabled={loading} className="w-full py-3 font-bold text-black bg-yellow-400 rounded-lg hover:bg-yellow-500 transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed"> {loading ? 'Logging in...' : 'Login'} </button> </form> <p className="text-center text-gray-400"> Don't have an account? <button onClick={() => onNavigate('signup')} className="font-bold text-yellow-400 hover:underline">Sign Up</button> </p> </AuthFormWrapper> ); };
        const SignUp = ({ onNavigate }) => { const [email, setEmail] = useState(''); const [password, setPassword] = useState(''); const [error, setError] = useState(''); const [loading, setLoading] = useState(false); const [showPassword, setShowPassword] = useState(false); const handleSignUp = async (e) => { e.preventDefault(); setLoading(true); setError(''); try { const userCredential = await window.firebase.createUserWithEmailAndPassword(window.auth, email, password); await window.firebase.sendEmailVerification(userCredential.user); } catch (err) { if (err.code === 'auth/email-already-in-use') { setError("An account with this email already exists. Please log in instead."); } else { setError(err.message); } } setLoading(false); }; return ( <AuthFormWrapper title="Create Your Account" subtitle="Start your journey with Social Architect."> <form className="space-y-4" onSubmit={handleSignUp}> <Alert message={error} /> <div> <label className="text-sm font-bold text-gray-400 block">Email</label> <input type="email" value={email} onChange={(e) => setEmail(e.target.value)} required className="w-full p-3 mt-1 text-gray-200 bg-gray-900/50 rounded-lg border border-gray-700 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-400 outline-none" /> </div> <div className="relative"> <label className="text-sm font-bold text-gray-400 block">Password</label> <input type={showPassword ? 'text' : 'password'} value={password} onChange={(e) => setPassword(e.target.value)} required className="w-full p-3 mt-1 text-gray-200 bg-gray-900/50 rounded-lg border border-gray-700 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-400 outline-none pr-10" /> <button type="button" onClick={() => setShowPassword(!showPassword)} className="absolute inset-y-0 right-0 top-6 flex items-center px-3 text-gray-400 hover:text-yellow-400"> {showPassword ? <EyeOffIcon /> : <EyeIcon />} </button> </div> <button type="submit" disabled={loading} className="w-full py-3 font-bold text-black bg-yellow-400 rounded-lg hover:bg-yellow-500 transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed"> {loading ? 'Creating Account...' : 'Create Account'} </button> </form> <p className="text-center text-gray-400"> Already have an account? <button onClick={() => onNavigate('login')} className="font-bold text-yellow-400 hover:underline">Login</button> </p> </AuthFormWrapper> ); };
        const Onboarding = ({ onFinish, user }) => { const [url, setUrl] = useState(''); const [isLoading, setIsLoading] = useState(false); const [analysisResult, setAnalysisResult] = useState(''); const [error, setError] = useState(''); const handleSubmit = async (e) => { e.preventDefault(); setIsLoading(true); setError(''); setAnalysisResult(''); try { const response = await fetch('/.netlify/functions/analyzeBrandVoice', { method: 'POST', headers: { 'Content-Type': 'application/json', }, body: JSON.stringify({ url: url }), }); const result = await response.json(); if (response.ok && result.success) { setAnalysisResult(result.brandVoice); } else { throw new Error(result.error || "Failed to analyze the URL."); } } catch (err) { console.error("Netlify Function Error:", err); setError("Sorry, we couldn't analyze the URL. Please ensure it's a valid, public page and try again."); } finally { setIsLoading(false); } }; const handleSaveAndContinue = async () => { if (!analysisResult) return; const userDocRef = window.firebase.doc(window.db, "users", user.uid); await window.firebase.setDoc(userDocRef, { brandVoice: analysisResult }, { merge: true }); onFinish(); }; if (analysisResult) { return ( <div className="flex items-center justify-center min-h-screen"> <div className="w-full max-w-lg p-8 space-y-6 bg-black/40 backdrop-blur-lg rounded-xl shadow-2xl shadow-yellow-500/10 border border-yellow-500/30 text-center"> <h1 className="text-3xl font-bold text-white">Here's Your Brand Voice</h1> <div className="text-left bg-gray-900/50 p-4 rounded-lg border border-gray-700"> {analysisResult.split('*').map((item, index) => item.trim() && <p key={index} className="my-2 text-gray-300">- {item.trim()}</p>)} </div> <p className="text-gray-400">We'll use this profile to generate all your future content. You can refine this later in settings.</p> <button onClick={handleSaveAndContinue} className="w-full py-3 font-bold text-black bg-yellow-400 rounded-lg hover:bg-yellow-500 transition-all transform hover:scale-105"> Save and Continue to Dashboard </button> </div> </div> ); } return ( <div className="flex items-center justify-center min-h-screen"> <div className="w-full max-w-lg p-8 space-y-6 bg-black/40 backdrop-blur-lg rounded-xl shadow-2xl shadow-yellow-500/10 border border-yellow-500/30 text-center"> <div className="w-16 h-16 mx-auto bg-yellow-400/10 rounded-full flex items-center justify-center border border-yellow-400/20"><BrandVoiceIcon /></div> <h1 className="text-3xl font-bold text-white">Let's Discover Your Brand Voice</h1> <p className="text-gray-300">Enter your website URL or a link to your primary social media profile (like Instagram, Facebook, or YouTube).</p> <form className="space-y-4" onSubmit={handleSubmit}> <Alert message={error} /> <div> <input type="url" value={url} onChange={(e) => setUrl(e.target.value)} placeholder="e.g., instagram.com/yourbrand" required className="w-full p-3 text-center text-gray-200 bg-gray-900/50 rounded-lg border border-gray-700 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-400 outline-none" /> </div> <button type="submit" disabled={isLoading} className="w-full py-3 font-bold text-black bg-yellow-400 rounded-lg hover:bg-yellow-500 transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed"> {isLoading ? 'Analyzing...' : 'Analyze Brand Voice'} </button> </form> <button onClick={onFinish} className="text-sm text-gray-500 hover:text-gray-300 mt-4">Skip for now</button> </div> </div> ); };
        const DashboardNavItem = ({ icon, text, active = false, onClick }) => (<button onClick={onClick} className={`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors font-semibold text-left ${active ? 'bg-yellow-400 text-black' : 'hover:bg-yellow-500/10 text-gray-300'}`}><span>{icon}</span><span>{text}</span></button>);
        const CreatePostView = ({ brandVoice }) => { const [topic, setTopic] = useState(''); const [textIsLoading, setTextIsLoading] = useState(false); const [imagesIsLoading, setImagesIsLoading] = useState(false); const [error, setError] = useState(''); const [generatedText, setGeneratedText] = useState(''); const [generatedImages, setGeneratedImages] = useState([]); const [selectedImage, setSelectedImage] = useState(null); const handleGenerate = async (e) => { e.preventDefault(); setTextIsLoading(true); setImagesIsLoading(true); setError(''); setGeneratedText(''); setGeneratedImages([]); setSelectedImage(null); const textPrompt = `Based on the following brand voice profile, write a compelling social media post about the topic provided. The post should be engaging and include relevant hashtags. Brand Voice Profile: ${brandVoice || 'Friendly, approachable, and professional.'} Topic: "${topic}"`; try { let textChatHistory = [{ role: "user", parts: [{ text: textPrompt }] }]; const textPayload = { contents: textChatHistory }; const apiKey = ""; const textApiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`; const textResponse = await fetch(textApiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(textPayload) }); if (!textResponse.ok) throw new Error(`Text API call failed with status: ${textResponse.status}`); const textResult = await textResponse.json(); const newText = textResult.candidates?.[0]?.content?.parts?.[0]?.text; if (!newText) throw new Error("No text content received from AI."); setGeneratedText(newText); setTextIsLoading(false); const imagePrompt = `A visually appealing, high-quality image for a social media post about: ${newText}. Do not include any text in the image.`; const imagePayload = { instances: [{ prompt: imagePrompt }], parameters: { "sampleCount": 4 } }; const imageApiUrl = `https://generativelanguage.googleapis.com/v1beta/models/imagen-3.0-generate-002:predict?key=${apiKey}`; const imageResponse = await fetch(imageApiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(imagePayload) }); if (!imageResponse.ok) throw new Error(`Image API call failed with status: ${imageResponse.status}`); const imageResult = await imageResponse.json(); if (imageResult.predictions && imageResult.predictions.length > 0) { const imageUrls = imageResult.predictions.map(pred => `data:image/png;base64,${pred.bytesBase64Encoded}`); setGeneratedImages(imageUrls); } else { throw new Error("No images received from AI."); } } catch (err) { console.error("AI Generation Error:", err); setError("Sorry, we couldn't generate content right now. Please try again later."); } finally { setTextIsLoading(false); setImagesIsLoading(false); } }; return ( <div> <h1 className="text-3xl font-bold mb-2 text-white">Create a New Post</h1> <p className="text-gray-400 mb-8">Describe the topic for your post, and our AI will do the rest.</p> <div className="bg-black/30 backdrop-blur-md p-8 rounded-xl border border-yellow-500/30"> <form onSubmit={handleGenerate}> <label htmlFor="topic" className="block text-sm font-bold text-gray-400 mb-2">What should this post be about?</label> <textarea id="topic" rows="3" value={topic} onChange={(e) => setTopic(e.target.value)} placeholder="e.g., A special 20% discount on all our cleaning services this weekend." required className="w-full p-3 text-gray-200 bg-gray-900/50 rounded-lg border border-gray-700 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-400 outline-none" /> <div className="text-right mt-4"> <button type="submit" disabled={textIsLoading || imagesIsLoading} className="bg-yellow-400 hover:bg-yellow-500 text-black font-bold py-2 px-6 rounded-lg transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed"> {textIsLoading ? 'Writing...' : imagesIsLoading ? 'Designing...' : 'Generate Content'} </button> </div> </form> {error && <div className="mt-6"><Alert message={error} /></div>} {(generatedText || textIsLoading) && ( <div className="mt-8 pt-6 border-t border-yellow-500/20"> <h2 className="text-2xl font-bold text-yellow-400 mb-4">AI Generated Content</h2> {textIsLoading ? <div className="whitespace-pre-wrap p-4 bg-gray-900/50 rounded-lg text-gray-500">Generating text...</div> : <div className="whitespace-pre-wrap p-4 bg-gray-900/50 rounded-lg text-gray-300">{generatedText}</div>} <div className="mt-6"> <h3 className="text-xl font-bold text-yellow-400 mb-4">Choose an Image</h3> <div className="grid grid-cols-2 md:grid-cols-4 gap-4"> {[...Array(4)].map((_, i) => ( <div key={i} className="aspect-square bg-gray-900/50 rounded-lg flex items-center justify-center text-gray-500 overflow-hidden"> {imagesIsLoading ? <div className="animate-pulse">Loading...</div> : generatedImages[i] ? <img src={generatedImages[i]} onClick={() => setSelectedImage(generatedImages[i])} className={`w-full h-full object-cover cursor-pointer border-4 ${selectedImage === generatedImages[i] ? 'border-yellow-400' : 'border-transparent'}`} alt={`Generated image ${i+1}`} /> : <span>Image {i+1}</span>} </div> ))} </div> </div> {(generatedText && selectedImage) && ( <div className="mt-8 pt-6 border-t border-yellow-500/20 flex justify-end space-x-4"> <button className="bg-gray-700/50 hover:bg-gray-700/80 text-white font-bold py-2 px-6 rounded-lg">Save as Draft</button> <button className="bg-yellow-400 hover:bg-yellow-500 text-black font-bold py-2 px-6 rounded-lg">Schedule Post</button> </div> )} </div> )} </div> </div> ); };
        const SettingsView = ({ user }) => { return ( <div> <h1 className="text-3xl font-bold mb-2 text-white">Settings</h1> <p className="text-gray-400 mb-8">Manage your account and connected services.</p> <div className="bg-black/30 backdrop-blur-md p-8 rounded-xl border border-yellow-500/30 mb-8"> <h2 className="text-2xl font-bold text-yellow-400 mb-4">Account Information</h2> <div className="space-y-4"> <div> <label className="text-sm font-bold text-gray-400 block">Email</label> <p className="text-gray-200">{user.email}</p> </div> <div> <label className="text-sm font-bold text-gray-400 block">Password</label> <button className="text-yellow-400 hover:underline">Change Password</button> </div> </div> </div> <div className="bg-black/30 backdrop-blur-md p-8 rounded-xl border border-yellow-500/30"> <h2 className="text-2xl font-bold text-yellow-400 mb-4">Connected Accounts</h2> <p className="text-gray-400 mb-6">Connect your social media accounts to allow EZODUS to post on your behalf.</p> <div className="space-y-4"> <div className="flex items-center justify-between p-4 bg-gray-900/50 rounded-lg"> <div className="flex items-center"> <MetaIcon /> <span className="font-bold text-white">Meta (Facebook & Instagram)</span> </div> <button className="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg"> Connect </button> </div> </div> </div> </div> ); };
        const VerifyEmail = ({ user, onLogout }) => { const [message, setMessage] = useState(''); const handleResend = async () => { try { await window.firebase.sendEmailVerification(user); setMessage('A new verification email has been sent. Please check your inbox (and spam folder).'); } catch (error) { setMessage('Failed to send verification email. Please try again shortly.'); console.error("Resend verification error:", error); } }; return ( <div className="flex items-center justify-center min-h-screen"> <div className="w-full max-w-lg p-8 space-y-6 bg-black/40 backdrop-blur-lg rounded-xl shadow-2xl shadow-yellow-500/10 border border-yellow-500/30 text-center"> <h1 className="text-3xl font-bold text-white">Verify Your Email</h1> <p className="text-gray-300"> We've sent a verification link to <strong>{user.email}</strong>. Please click the link in the email to activate your account. </p> <p className="text-gray-400 text-sm"> You will not be able to access the dashboard until your email is verified. </p> {message && <Alert message={message} type="success" />} <div className="flex flex-col sm:flex-row items-center justify-center gap-4 pt-4"> <button onClick={handleResend} className="w-full sm:w-auto py-2 px-6 font-bold text-black bg-yellow-400 rounded-lg hover:bg-yellow-500 transition-all"> Resend Email </button> <button onClick={onLogout} className="w-full sm:w-auto text-sm text-gray-400 hover:text-white"> Logout </button> </div> </div> </div> ); };
        const Dashboard = ({ onLogout, user }) => { const [view, setView] = useState('createPost'); const [brandVoice, setBrandVoice] = useState(''); useEffect(() => { const userDocRef = window.firebase.doc(window.db, "users", user.uid); const unsubscribe = window.firebase.onSnapshot(userDocRef, (docSnap) => { if (docSnap.exists() && docSnap.data().brandVoice) { setBrandVoice(docSnap.data().brandVoice); } }, (error) => { console.error("Error fetching brand voice:", error); }); return () => unsubscribe(); }, [user.uid]); const renderView = () => { switch (view) { case 'dashboard': return ( <div> <h1 className="text-3xl font-bold mb-2 text-white">Welcome, {user.displayName || user.email}!</h1> <p className="text-gray-400 mb-8">This is your social media command center.</p> <div className="bg-black/30 backdrop-blur-md p-8 rounded-xl border border-dashed border-yellow-500/30 text-center"> <h2 className="text-xl font-bold mb-2 text-yellow-400">Dashboard Overview Coming Soon</h2> <p className="text-gray-300">Key metrics and analytics will be displayed here.</p> </div> </div> ); case 'createPost': return <CreatePostView brandVoice={brandVoice} />; case 'settings': return <SettingsView user={user} />; default: return <div> <h2 className="text-xl font-bold mb-2 text-yellow-400">{view} Coming Soon</h2> </div>; } }; return ( <div className="flex h-screen bg-black/50"> <aside className="w-64 bg-black/30 backdrop-blur-md border-r border-yellow-500/20 p-6 hidden md:flex flex-col"> <div className="text-2xl font-bold tracking-wider mb-10 text-white"><span className="text-yellow-400">EZO</span>DUS</div> <nav className="space-y-4"> <DashboardNavItem icon="🏠" text="Dashboard" active={view === 'dashboard'} onClick={() => setView('dashboard')} /> <DashboardNavItem icon="✍️" text="Create Post" active={view === 'createPost'} onClick={() => setView('createPost')} /> <DashboardNavItem icon="📅" text="Calendar" active={view === 'calendar'} onClick={() => setView('calendar')} /> <DashboardNavItem icon="📈" text="Analytics" active={view === 'analytics'} onClick={() => setView('analytics')} /> <DashboardNavItem icon="⚙️" text="Settings" active={view === 'settings'} onClick={() => setView('settings')} /> </nav> <div className="mt-auto"><button onClick={onLogout} className="flex items-center space-x-2 text-gray-400 hover:text-white w-full p-3 rounded-lg hover:bg-yellow-500/10"><svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg><span>Logout</span></button></div> </aside> <main className="flex-1 p-6 md:p-10 overflow-y-auto"> <div className="container mx-auto">{renderView()}</div> </main> </div> ); };

        function App() {
            const [user, setUser] = useState(null);
            const [page, setPage] = useState('landing');
            const [loading, setLoading] = useState(true);
            const [onboardingComplete, setOnboardingComplete] = useState(false);

            useEffect(() => {
                let unsubscribeUserDoc = null;
                const unsubscribeAuth = window.firebase.onAuthStateChanged(window.auth, (currentUser) => {
                    setUser(currentUser);
                    if (unsubscribeUserDoc) unsubscribeUserDoc();
                    if (currentUser) {
                        const userDocRef = window.firebase.doc(window.db, "users", currentUser.uid);
                        unsubscribeUserDoc = window.firebase.onSnapshot(userDocRef, (docSnap) => {
                            setOnboardingComplete(docSnap.exists() && docSnap.data().brandVoice);
                            setLoading(false);
                        }, (error) => {
                            console.error("Firestore snapshot error:", error);
                            setLoading(false);
                        });
                    } else {
                        setLoading(false);
                    }
                });
                return () => {
                    unsubscribeAuth();
                    if (unsubscribeUserDoc) unsubscribeUserDoc();
                };
            }, []);

            const navigateTo = (targetPage) => setPage(targetPage);
            const handleLogout = async () => {
                await window.firebase.signOut(window.auth);
                setOnboardingComplete(false);
                navigateTo('landing');
            };
            const handleOnboardingFinish = () => setOnboardingComplete(true);

            const renderPage = () => {
                if (loading) return <div className="flex items-center justify-center min-h-screen"><div className="text-yellow-400 text-xl">Loading...</div></div>;
                if (user) {
                    if (!user.emailVerified) return <VerifyEmail user={user} onLogout={handleLogout} />;
                    if (!onboardingComplete) return <Onboarding onFinish={handleOnboardingFinish} user={user} />;
                    return <Dashboard onLogout={handleLogout} user={user} />;
                }
                switch (page) {
                    case 'login': return <Login onNavigate={navigateTo} />;
                    case 'signup': return <SignUp onNavigate={navigateTo} />;
                    default: return <LandingPage onNavigate={navigateTo} />;
                }
            };

            return (
                <div className="text-gray-100 min-h-screen font-sans relative">
                    <ConstellationBackground />
                    <div className="relative z-10">{renderPage()}</div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
